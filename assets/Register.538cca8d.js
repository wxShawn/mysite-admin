import{d as ce,h as c,c as Te,a as Pe,b as Ae,i as ke,e as Ee,f as re,u as Ue,g as me,j as Oe,k as Le,r as B,t as $e,l as He,m as N,w as je,n as ze,o as qe,N as U,p as le,q as ae,s as Ge,v as ie,x as ue,X as se,y as _,_ as Ke,z as We,A as Xe,B as Je,C as Qe,D as d,E as I,F as f,G as Ye,H as T,I as Ze,J as et,K as tt,L as W,M as nt,O as rt}from"./index.8cc28b4e.js";import{A as lt}from"./Add.79f0b69c.js";const at=ce({name:"Remove",render(){return c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},c("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),it=t=>{const{textColorDisabled:a}=t;return{iconColorDisabled:a}},ut=Te({name:"InputNumber",common:Pe,peers:{Button:Ae,Input:ke},self:it}),st=ut;function ot(t){return t==null||typeof t=="string"&&t.trim()===""?null:Number(t)}function dt(t){return t.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(t)||/^\.\d+$/.test(t))}function X(t){return t==null?!0:!Number.isNaN(t)}function oe(t,a){return t==null?"":a===void 0?String(t):t.toFixed(a)}function J(t){if(t===null)return null;if(typeof t=="number")return t;{const a=Number(t);return Number.isNaN(a)?null:a}}const ft=Ee([re("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),re("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),de=800,fe=100,ct=Object.assign(Object.assign({},me.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),mt=ce({name:"InputNumber",props:ct,setup(t){const{mergedBorderedRef:a,mergedClsPrefixRef:h,mergedRtlRef:u}=Ue(t),o=me("InputNumber","-input-number",ft,st,t,h),{localeRef:b}=Oe("InputNumber"),m=Le(t),{mergedSizeRef:l,mergedDisabledRef:s,mergedStatusRef:O}=m,v=B(null),P=B(null),Q=B(null),L=B(t.defaultValue),ve=$e(t,"value"),w=He(ve,L),V=B(""),$=e=>{const n=String(e).split(".")[1];return n?n.length:0},ge=e=>{const n=[t.min,t.max,t.step,e].map(r=>r===void 0?0:$(r));return Math.max(...n)},pe=N(()=>{const{placeholder:e}=t;return e!==void 0?e:b.value.placeholder}),A=N(()=>{const e=J(t.step);return e!==null?e===0?1:Math.abs(e):1}),Y=N(()=>{const e=J(t.min);return e!==null?e:null}),Z=N(()=>{const e=J(t.max);return e!==null?e:null}),M=e=>{const{value:n}=w;if(e===n){F();return}const{"onUpdate:value":r,onUpdateValue:i,onChange:p}=t,{nTriggerFormInput:x,nTriggerFormChange:R}=m;p&&_(p,e),i&&_(i,e),r&&_(r,e),L.value=e,x(),R()},g=({offset:e,doUpdateIfValid:n,fixPrecision:r,isInputing:i})=>{const{value:p}=V;if(i&&dt(p))return!1;const x=(t.parse||ot)(p);if(x===null)return n&&M(null),null;if(X(x)){const R=$(x),{precision:D}=t;if(D!==void 0&&D<R&&!r)return!1;let y=parseFloat((x+e).toFixed(D!=null?D:ge(x)));if(X(y)){const{value:G}=Z,{value:K}=Y;if(G!==null&&y>G){if(!n||i)return!1;y=G}if(K!==null&&y<K){if(!n||i)return!1;y=K}return t.validator&&!t.validator(y)?!1:(n&&M(y),y)}}return!1},F=()=>{const{value:e}=w;if(X(e)){const{format:n,precision:r}=t;n?V.value=n(e):e===null||r===void 0||$(e)>r?V.value=oe(e,void 0):V.value=oe(e,r)}else V.value=String(e)};F();const he=N(()=>g({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),H=N(()=>{const{value:e}=w;if(t.validator&&e===null)return!1;const{value:n}=A;return g({offset:-n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),j=N(()=>{const{value:e}=w;if(t.validator&&e===null)return!1;const{value:n}=A;return g({offset:+n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function be(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=m;n&&_(n,e),r()}function we(e){var n,r;if(e.target===((n=v.value)===null||n===void 0?void 0:n.wrapperElRef))return;const i=g({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(i!==!1){const R=(r=v.value)===null||r===void 0?void 0:r.inputElRef;R&&(R.value=String(i||"")),w.value===i&&F()}else F();const{onBlur:p}=t,{nTriggerFormBlur:x}=m;p&&_(p,e),x()}function xe(e){const{onClear:n}=t;n&&_(n,e)}function z(){const{value:e}=j;if(!e){ne();return}const{value:n}=w;if(n===null)t.validator||M(ee());else{const{value:r}=A;g({offset:r,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function q(){const{value:e}=H;if(!e){te();return}const{value:n}=w;if(n===null)t.validator||M(ee());else{const{value:r}=A;g({offset:-r,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const ye=be,Ie=we;function ee(){if(t.validator)return null;const{value:e}=Y,{value:n}=Z;return e!==null?Math.max(0,e):n!==null?Math.min(0,n):0}function Ve(e){xe(e),M(null)}function Ne(e){var n,r,i;!((n=Q.value)===null||n===void 0)&&n.$el.contains(e.target)&&e.preventDefault(),!((r=P.value)===null||r===void 0)&&r.$el.contains(e.target)&&e.preventDefault(),(i=v.value)===null||i===void 0||i.activate()}let C=null,S=null,k=null;function te(){k&&(window.clearTimeout(k),k=null),C&&(window.clearInterval(C),C=null)}function ne(){E&&(window.clearTimeout(E),E=null),S&&(window.clearInterval(S),S=null)}function Re(){k=window.setTimeout(()=>{C=window.setInterval(()=>{q()},fe)},de),ae("mouseup",document,()=>{window.setTimeout(te,0)},{once:!0})}let E=null;function _e(){E=window.setTimeout(()=>{S=window.setInterval(()=>{z()},fe)},de),ae("mouseup",document,()=>{window.setTimeout(ne,0)},{once:!0})}const Be=()=>{S||z()},Me=()=>{C||q()};function Fe(e){var n,r;if(e.key==="Enter"){if(e.target===((n=v.value)===null||n===void 0?void 0:n.wrapperElRef))return;g({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((r=v.value)===null||r===void 0||r.deactivate())}else if(e.key==="ArrowUp"){if(!j.value||t.keyboard.ArrowUp===!1)return;e.preventDefault(),g({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}else if(e.key==="ArrowDown"){if(!H.value||t.keyboard.ArrowDown===!1)return;e.preventDefault(),g({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&q()}}function Ce(e){V.value=e,t.updateValueOnInput&&!t.format&&!t.parse&&t.precision===void 0&&g({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}je(w,()=>{F()});const Se={focus:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.blur()}},De=ze("InputNumber",u,h);return Object.assign(Object.assign({},Se),{rtlEnabled:De,inputInstRef:v,minusButtonInstRef:P,addButtonInstRef:Q,mergedClsPrefix:h,mergedBordered:a,uncontrolledValue:L,mergedValue:w,mergedPlaceholder:pe,displayedValueInvalid:he,mergedSize:l,mergedDisabled:s,displayedValue:V,addable:j,minusable:H,mergedStatus:O,handleFocus:ye,handleBlur:Ie,handleClear:Ve,handleMouseDown:Ne,handleAddClick:Be,handleMinusClick:Me,handleAddMousedown:_e,handleMinusMousedown:Re,handleKeyDown:Fe,handleUpdateDisplayedValue:Ce,mergedTheme:o,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:qe(()=>{const{self:{iconColorDisabled:e}}=o.value,[n,r,i,p]=Ge(e);return{textColorTextDisabled:`rgb(${n}, ${r}, ${i})`,opacityDisabled:`${p}`}})})},render(){const{mergedClsPrefix:t,$slots:a}=this,h=()=>c(se,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ie(a["minus-icon"],()=>[c(ue,{clsPrefix:t},{default:()=>c(at,null)})])}),u=()=>c(se,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ie(a["add-icon"],()=>[c(ue,{clsPrefix:t},{default:()=>c(lt,null)})])});return c("div",{class:[`${t}-input-number`,this.rtlEnabled&&`${t}-input-number--rtl`]},c(U,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var o;return this.showButton&&this.buttonPlacement==="both"?[h(),le(a.prefix,b=>b?c("span",{class:`${t}-input-number-prefix`},b):null)]:(o=a.prefix)===null||o===void 0?void 0:o.call(a)},suffix:()=>{var o;return this.showButton?[le(a.suffix,b=>b?c("span",{class:`${t}-input-number-suffix`},b):null),this.buttonPlacement==="right"?h():null,u()]:(o=a.suffix)===null||o===void 0?void 0:o.call(a)}}))}});const vt={class:"register-container"},gt=tt("Register"),pt={__name:"Register",setup(t){const a=We();window.$message=a;const h=B(null),u=Xe({name:"",email:"",password:"",level:1}),o={name:{required:!0,validator(m,l){return l?W.validate({adminName:l}).length>0?new Error("name\u683C\u5F0F\u9519\u8BEF"):!0:new Error("\u8BF7\u586B\u5199name")},trigger:"blur"},email:{required:!0,validator(m,l){return l?W.validate({email:l}).length>0?new Error("email\u683C\u5F0F\u9519\u8BEF"):!0:new Error("\u8BF7\u586B\u5199email")},trigger:"blur"},password:{required:!0,validator(m,l){return l?W.validate({password:l}).length>0?new Error("password\u683C\u5F0F\u9519\u8BEF"):!0:new Error("\u8BF7\u586B\u5199password")},trigger:"blur"},level:{required:!0,validator(m,l){return l?typeof l!="number"?new Error("level\u683C\u5F0F\u9519\u8BEF"):!0:new Error("\u8BF7\u586B\u5199level")},trigger:"blur"}},b=async()=>{try{await h.value.validate()}catch(P){return console.log(P),!1}const{name:m,email:l,password:s,level:O}=u,v=await nt.admin.register(m,l,s,O);v.code===0&&(a.success(v.msg),rt.push({name:"Login"}))};return(m,l)=>(Je(),Qe("div",vt,[d(f(et),{style:{width:"500px"}},{default:I(()=>[d(f(Ye),{ref_key:"registerFormRef",ref:h,model:u,rules:o},{default:I(()=>[d(f(T),{label:"name",path:"name"},{default:I(()=>[d(f(U),{value:u.name,"onUpdate:value":l[0]||(l[0]=s=>u.name=s)},null,8,["value"])]),_:1}),d(f(T),{label:"email",path:"email"},{default:I(()=>[d(f(U),{value:u.email,"onUpdate:value":l[1]||(l[1]=s=>u.email=s)},null,8,["value"])]),_:1}),d(f(T),{label:"password",path:"password"},{default:I(()=>[d(f(U),{type:"password",value:u.password,"onUpdate:value":l[2]||(l[2]=s=>u.password=s)},null,8,["value"])]),_:1}),d(f(T),{label:"level",path:"level"},{default:I(()=>[d(f(mt),{style:{width:"100%"},"show-button":!1,value:u.level,"onUpdate:value":l[3]||(l[3]=s=>u.level=s)},null,8,["value"])]),_:1}),d(f(T),null,{default:I(()=>[d(f(Ze),{style:{width:"100%"},type:"primary",onClick:b},{default:I(()=>[gt]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]))}},wt=Ke(pt,[["__scopeId","data-v-1d9ecae7"]]);export{wt as default};
