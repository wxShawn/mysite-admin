import{_ as de}from"./UploadMedia.d59d268e.js";import{u as pe,a as H,c as ue}from"./index.dcfdd4ec.js";import{_ as me}from"./_plugin-vue_export-helper.cdc0426e.js";import{ax as fe,d as P,u as ne,g as D,k as ge,l as j,ao as he,h as x,a5 as se,bF as ve,bt as J,a as ye,e as Q,f as N,bG as _e,W as X,a3 as xe,V as we,a4 as ze,aw as be,v as C,x as M,at as w,r as T,s as E,aM as Se,y as n,z as o,A as t,ac as Y,C as q,B as $,au as Z,aK as Ce,D as R,aL as O,aN as ee,bH as ke,bI as $e}from"./index.1b1d1591.js";import{u as Be}from"./cssr.30f5bc2c.js";import{N as Le}from"./Pagination.d1ed0d9d.js";import{g as Ne,N as W}from"./Icon.35eaa410.js";import{u as Me}from"./use-dialog.df40595e.js";import{N as te,b as U}from"./FormItem.8f1d2251.js";import{N as A}from"./Input.027afa5d.js";import{a as Re,N as Ie}from"./Grid.3c7b9122.js";import"./Add.ed8003c6.js";import"./utils.3f54be48.js";import"./Tooltip.b6bd4cf9.js";import"./Tag.bb25b402.js";const Fe={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},Te=()=>Fe,Ue={name:"Space",self:Te},Pe=Ue;let K;const Ve=()=>{if(!fe)return!0;if(K===void 0){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const l=e.scrollHeight===1;return document.body.removeChild(e),K=l}return K},Ee=Object.assign(Object.assign({},D.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),je=P({name:"Space",props:Ee,setup(e){const{mergedClsPrefixRef:l,mergedRtlRef:r}=ne(e),s=D("Space","-space",void 0,Pe,e,l),m=ge("Space",r,l);return{useGap:Ve(),rtlEnabled:m,mergedClsPrefix:l,margin:j(()=>{const{size:a}=e;if(Array.isArray(a))return{horizontal:a[0],vertical:a[1]};if(typeof a=="number")return{horizontal:a,vertical:a};const{self:{[se("gap",a)]:c}}=s.value,{row:u,col:y}=ve(c);return{horizontal:J(y),vertical:J(u)}})}},render(){const{vertical:e,align:l,inline:r,justify:s,itemStyle:m,margin:a,wrap:c,mergedClsPrefix:u,rtlEnabled:y,useGap:h,wrapItem:I,internalUseGap:v}=this,b=he(Ne(this));if(!b.length)return null;const V=`${a.horizontal}px`,B=`${a.horizontal/2}px`,L=`${a.vertical}px`,_=`${a.vertical/2}px`,g=b.length-1,d=s.startsWith("space-");return x("div",{role:"none",class:[`${u}-space`,y&&`${u}-space--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e?"column":"row",justifyContent:["start","end"].includes(s)?"flex-"+s:s,flexWrap:!c||e?"nowrap":"wrap",marginTop:h||e?"":`-${_}`,marginBottom:h||e?"":`-${_}`,alignItems:l,gap:h?`${a.vertical}px ${a.horizontal}px`:""}},!I&&(h||v)?b:b.map((G,z)=>x("div",{role:"none",style:[m,{maxWidth:"100%"},h?"":e?{marginBottom:z!==g?L:""}:y?{marginLeft:d?s==="space-between"&&z===g?"":B:z!==g?V:"",marginRight:d?s==="space-between"&&z===0?"":B:"",paddingTop:_,paddingBottom:_}:{marginRight:d?s==="space-between"&&z===g?"":B:z!==g?V:"",marginLeft:d?s==="space-between"&&z===0?"":B:"",paddingTop:_,paddingBottom:_}]},G)))}}),De=e=>{const{opacityDisabled:l,heightTiny:r,heightSmall:s,heightMedium:m,heightLarge:a,heightHuge:c,primaryColor:u,fontSize:y}=e;return{fontSize:y,textColor:u,sizeTiny:r,sizeSmall:s,sizeMedium:m,sizeLarge:a,sizeHuge:c,color:u,opacitySpinning:l}},Ge={name:"Spin",common:ye,self:De},He=Ge,Oe=Q([Q("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),N("spin-container",{position:"relative"},[N("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[_e()])]),N("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),N("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[X("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),N("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),N("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[X("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),We={small:20,medium:18,large:16},Ae=Object.assign(Object.assign({},D.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),Ke=P({name:"Spin",props:Ae,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:r}=ne(e),s=D("Spin","-spin",Oe,He,e,l),m=j(()=>{const{size:c}=e,{common:{cubicBezierEaseInOut:u},self:y}=s.value,{opacitySpinning:h,color:I,textColor:v}=y,b=typeof c=="number"?be(c):y[se("size",c)];return{"--n-bezier":u,"--n-opacity-spinning":h,"--n-size":b,"--n-color":I,"--n-text-color":v}}),a=r?xe("spin",j(()=>{const{size:c}=e;return typeof c=="number"?String(c):c[0]}),m,e):void 0;return{mergedClsPrefix:l,compitableShow:Be(e,["spinning","show"]),mergedStrokeWidth:j(()=>{const{strokeWidth:c}=e;if(c!==void 0)return c;const{size:u}=e;return We[typeof u=="number"?"medium":u]}),cssVars:r?void 0:m,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){var e,l;const{$slots:r,mergedClsPrefix:s,description:m}=this,a=r.icon&&this.rotate,c=(m||r.description)&&x("div",{class:`${s}-spin-description`},m||((e=r.description)===null||e===void 0?void 0:e.call(r))),u=r.icon?x("div",{class:[`${s}-spin-body`,this.themeClass]},x("div",{class:[`${s}-spin`,a&&`${s}-spin--rotate`],style:r.default?"":this.cssVars},r.icon()),c):x("div",{class:[`${s}-spin-body`,this.themeClass]},x(we,{clsPrefix:s,style:r.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${s}-spin`}),c);return(l=this.onRender)===null||l===void 0||l.call(this),r.default?x("div",{class:[`${s}-spin-container`,this.themeClass],style:this.cssVars},x("div",{class:[`${s}-spin-content`,this.compitableShow&&`${s}-spin-content--spinning`]},r),x(ze,{name:"fade-in-transition"},{default:()=>this.compitableShow?u:null})):u}}),Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Qe=w("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"},null,-1),Xe=[Qe],Ye=P({name:"DeleteForeverFilled",render:function(l,r){return C(),M("svg",Je,Xe)}}),qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ze=w("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83l3.75 3.75l1.83-1.83z",fill:"currentColor"},null,-1),et=[Ze],tt=P({name:"EditRound",render:function(l,r){return C(),M("svg",qe,et)}}),nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},st=w("path",{d:"M18 13v7H4V6h5.02c.05-.71.22-1.38.48-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5l-2-2zm-1.5 5h-11l2.75-3.53l1.96 2.36l2.75-3.54zm2.8-9.11c.44-.7.7-1.51.7-2.39C20 4.01 17.99 2 15.5 2S11 4.01 11 6.5s2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7L21 13.42L22.42 12L19.3 8.89zM15.5 9a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5z",fill:"currentColor"},null,-1),at=[st],it=P({name:"ImageSearchFilled",render:function(l,r){return C(),M("svg",nt,at)}});const ot=e=>(ke("data-v-7915fc9d"),e=e(),$e(),e),lt=R("\u67E5\u8BE2"),rt=R("\u4E0A\u4F20\u56FE\u7247"),ct=["src","alt"],dt={class:"info"},pt={style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},ut={style:{color:"#aaa","font-size":"12px"}},mt={key:1,style:{"text-align":"center"}},ft=ot(()=>w("div",{style:{color:"#ccc"}},"No Image",-1)),gt={style:{"margin-top":"20px",display:"flex","justify-content":"flex-end"}},ht=R("\u590D\u5236"),vt=R("\u8FD4\u56DE"),yt=R("\u66F4\u65B0"),_t={__name:"ImageList",setup(e){const l=pe(),r=Me(),s=T(null),m=E({name:""}),a=()=>{console.log(d.page,d.pageSize),g()},c=T(!1),u=()=>{g(),c.value=!1},y=f=>{r.warning({title:"\u8B66\u544A",content:"\u8BE5\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF0C\u786E\u8BA4\u5220\u9664\uFF1F",positiveText:"\u786E\u8BA4\u5220\u9664",negativeText:"\u8003\u8651\u4E00\u4E0B",onPositiveClick:async()=>{(await H.media.delete(f)).code===0&&(l.success("\u5220\u9664\u6210\u529F"),g())},onNegativeClick:()=>{}})},h=T(!1),I=T(null),v=E({id:"",name:"",url:""}),b=(f,p,i)=>{h.value=!0,Object.assign(v,{id:f,name:p,url:i})},V=async()=>{try{await navigator.clipboard.writeText(v.url),l.info("\u5DF2\u590D\u5236URL")}catch(f){console.warn(f),l.info("\u590D\u5236\u5931\u8D25")}},B=async()=>{const f=await H.media.update(v.id,v.name);f.code===0&&(l.success(f.msg),g()),h.value=!1},L=E([]),_=T(!1),g=async()=>{_.value=!0;const{page:f,pageSize:p}=d,{name:i}=m,F=await H.media.findAllImage(f,p,i);if(F.code===0){L.length=0,G(F.result.count);const{rows:k}=F.result;for(let S=0,ie=k.length;S<ie;S++){const oe=k[S].id,le=`${ue.REQUEST_URL}/${k[S].path.split("uploads/",2)[1]}`,re=k[S].name,ce=k[S].size>1024*1024?(k[S].size/1024/1024).toFixed(2)+" MB":(k[S].size/1024).toFixed(2)+" KB";L.push({id:oe,url:le,name:re,size:ce})}}_.value=!1};Se(()=>{g()});const d=E({page:1,pageSize:10,sizeOptions:[{label:"10/\u9875",value:10},{label:"20/\u9875",value:20},{label:"30/\u9875",value:30}],pageCount:0,total:0}),G=f=>{if(f===0)return!1;d.total=f,d.pageCount=Math.ceil(f/d.pageSize),d.page>d.pageCount&&(d.page=d.pageCount,g())},z=()=>{g()},ae=()=>{g()};return(f,p)=>(C(),M(Y,null,[n(t(je),{vertical:"",size:12},{default:o(()=>[n(t(q),null,{default:o(()=>[n(t(te),{ref_key:"searchFormRef",ref:s,inline:"",model:m},{default:o(()=>[n(t(U),{label:"\u56FE\u7247\u6807\u9898"},{default:o(()=>[n(t(A),{value:m.name,"onUpdate:value":p[0]||(p[0]=i=>m.name=i)},null,8,["value"])]),_:1}),n(t(U),null,{default:o(()=>[n(t($),{type:"info",onClick:a},{default:o(()=>[lt]),_:1})]),_:1}),n(t(U),null,{default:o(()=>[n(t($),{type:"primary",onClick:p[1]||(p[1]=i=>c.value=!0)},{default:o(()=>[rt]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),L.length>0?(C(),Z(t(Ke),{key:0,size:"large",show:_.value},{default:o(()=>[n(t(Re),{"x-gap":"12","y-gap":"12",cols:"m:3 l:4 xl:6",responsive:"screen"},{default:o(()=>[(C(!0),M(Y,null,Ce(L,i=>(C(),Z(t(Ie),{key:i},{default:o(()=>[n(t(q),{class:"image-card","content-style":"padding: 5px",hoverable:""},{default:o(()=>[w("img",{class:"cover",src:i.url,alt:i.title},null,8,ct),n(t($),{class:"delete-btn",size:"tiny",onClick:F=>y(i.id)},{default:o(()=>[n(t(W),null,{default:o(()=>[n(t(Ye))]),_:1})]),_:2},1032,["onClick"]),n(t($),{class:"edit-btn",size:"tiny",onClick:F=>b(i.id,i.name,i.url)},{default:o(()=>[n(t(W),null,{default:o(()=>[n(t(tt))]),_:1})]),_:2},1032,["onClick"]),w("div",dt,[w("div",pt,[w("b",null,O(i.name),1)]),w("div",ut,O(i.size),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])):(C(),M("div",mt,[n(t(W),{depth:5,size:40},{default:o(()=>[n(t(it))]),_:1}),ft])),w("div",gt,[n(t(Le),{disabled:_.value,page:d.page,"onUpdate:page":p[2]||(p[2]=i=>d.page=i),"page-size":d.pageSize,"onUpdate:page-size":p[3]||(p[3]=i=>d.pageSize=i),"page-count":d.pageCount,"show-size-picker":"","page-sizes":d.sizeOptions,onUpdatePage:z,onUpdatePageSize:ae},{prefix:o(()=>[R(" \u5171 "+O(d.total)+" \u5F20\u56FE\u7247 ",1)]),_:1},8,["disabled","page","page-size","page-count","page-sizes"])])]),_:1}),n(t(ee),{show:c.value,"onUpdate:show":p[4]||(p[4]=i=>c.value=i),class:"custom-card",preset:"card",style:{width:"500px"},title:"\u4E0A\u4F20\u56FE\u7247"},{default:o(()=>[n(de,{accept:".gif,.jpg,.png,.jpeg",onSuccess:u})]),_:1},8,["show"]),n(t(ee),{show:h.value,"onUpdate:show":p[7]||(p[7]=i=>h.value=i),preset:"dialog",title:"\u56FE\u7247"},{action:o(()=>[n(t($),{onClick:p[6]||(p[6]=i=>h.value=!1)},{default:o(()=>[vt]),_:1}),n(t($),{type:"primary",onClick:B},{default:o(()=>[yt]),_:1})]),default:o(()=>[n(t(te),{ref_key:"editFormRef",ref:I,style:{"margin-top":"30px"},"label-placement":"left",model:v},{default:o(()=>[n(t(U),{label:"\u56FE\u7247\u540D\u79F0"},{default:o(()=>[n(t(A),{value:v.name,"onUpdate:value":p[5]||(p[5]=i=>v.name=i)},null,8,["value"])]),_:1}),n(t(U),{label:"\u56FE\u7247\u5730\u5740"},{default:o(()=>[n(t(A),{value:v.url,disabled:""},null,8,["value"]),n(t($),{style:{"margin-left":"20px"},onClick:V},{default:o(()=>[ht]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])],64))}},Tt=me(_t,[["__scopeId","data-v-7915fc9d"]]);export{Tt as default};
