import{ai as V,ao as L,o as b,r as C,Y as Q,Z as D,d as O,$ as F,ap as B,h as M,aq as X,u as Y,m as G,W as z,ab as U,t as W,ar as Z,ae as H,aa as J,as as K,ak as I,a1 as ee,at as te}from"./index.c8a34d21.js";function se(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(i=>{if(i==="")return;const[r,n]=i.split(":");n===void 0?t[""]=r:t[r]=n}),t}function x(e,t){var i;if(e==null)return;const r=se(e);if(t===void 0)return r[""];if(typeof t=="string")return(i=r[t])!==null&&i!==void 0?i:r[""];if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n){const s=t[n];if(s in r)return r[s]}return r[""]}else{let n,s=-1;return Object.keys(r).forEach(l=>{const o=Number(l);!Number.isNaN(o)&&t>=o&&o>=s&&(s=o,n=r[l])}),n}}function ne(e){var t;const i=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:r})=>r===V);return!!(i&&i.value===!1)}const re={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function oe(e){return`(min-width: ${e}px)`}const N={};function ie(e=re){if(!L)return b(()=>[]);if(typeof window.matchMedia!="function")return b(()=>[]);const t=C({}),i=Object.keys(e),r=(n,s)=>{n.matches?t.value[s]=!0:t.value[s]=!1};return i.forEach(n=>{const s=e[n];let l,o;N[s]===void 0?(l=window.matchMedia(oe(s)),l.addEventListener?l.addEventListener("change",d=>{o.forEach(u=>{u(d,n)})}):l.addListener&&l.addListener(d=>{o.forEach(u=>{u(d,n)})}),o=new Set,N[s]={mql:l,cbs:o}):(l=N[s].mql,o=N[s].cbs),o.add(r),l.matches&&o.forEach(d=>{d(l,n)})}),Q(()=>{i.forEach(n=>{const{cbs:s}=N[e[n]];s.has(r)&&s.delete(r)})}),b(()=>{const{value:n}=t;return i.filter(s=>n[s])})}const j=1,P=D("n-grid"),T=1,ae={span:{type:[Number,String],default:T},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},de=O({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ae,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:i,overflowRef:r}=F(P),n=X();return{overflow:r,itemStyle:i,deriveStyle:()=>{e.value;const{privateSpan:s=T,privateShow:l=!0,privateColStart:o=void 0,privateOffset:d=0}=n.vnode.props,{value:u}=t,S=B(u||0);return{display:l?"":"none",gridColumn:`${o!=null?o:`span ${s}`} / span ${s}`,marginLeft:d?`calc((100% - (${s} - 1) * ${S}) / ${s} * ${d} + ${S} * ${d})`:""}}}},render(){var e,t;return M("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}}),le={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},q=24,E="__ssr__",fe={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},pe=O({name:"Grid",inheritAttrs:!1,props:fe,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:i}=Y(e),r=/^\d+$/,n=C(void 0),s=ie((i==null?void 0:i.value)||le),l=G(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),o=b(()=>{if(!!l.value)return e.responsive==="self"?n.value:s.value}),d=G(()=>{var f;return(f=Number(x(e.cols.toString(),o.value)))!==null&&f!==void 0?f:q}),u=G(()=>x(e.xGap.toString(),o.value)),S=G(()=>x(e.yGap.toString(),o.value)),$=f=>{n.value=f.contentRect.width},v=f=>{te($,f)},y=C(!1),R=b(()=>{if(e.responsive==="self")return v}),p=C(!1),m=C();return z(()=>{const{value:f}=m;f&&f.hasAttribute(E)&&(f.removeAttribute(E),p.value=!0)}),U(P,{isSsrRef:p,itemStyleRef:W(e,"itemStyle"),xGapRef:u,overflowRef:y}),{isSsr:!Z,contentEl:m,mergedClsPrefix:t,style:b(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`,columnGap:B(u.value),rowGap:B(S.value)})),isResponsive:l,responsiveQuery:o,responsiveCols:d,handleResize:R,overflow:y}},render(){const e=()=>{var t,i,r,n,s,l,o;this.overflow=!1;const d=J(K(this)),u=[],{collapsed:S,collapsedRows:$,responsiveCols:v,responsiveQuery:y}=this;d.forEach(a=>{var _,h,c,w;if(((_=a==null?void 0:a.type)===null||_===void 0?void 0:_.__GRID_ITEM__)!==!0)return;if(ne(a)){const g=I(a);g.props?g.props.privateShow=!1:g.props={privateShow:!1},u.push({child:g,rawChildSpan:0});return}a.dirs=((h=a.dirs)===null||h===void 0?void 0:h.filter(({dir:g})=>g!==V))||null;const k=I(a),A=Number((w=x((c=k.props)===null||c===void 0?void 0:c.span,y))!==null&&w!==void 0?w:j);A!==0&&u.push({child:k,rawChildSpan:A})});let R=0;const p=(t=u[u.length-1])===null||t===void 0?void 0:t.child;if(p!=null&&p.props){const a=(i=p.props)===null||i===void 0?void 0:i.suffix;a!==void 0&&a!==!1&&(R=(n=(r=p.props)===null||r===void 0?void 0:r.span)!==null&&n!==void 0?n:j,p.props.privateSpan=R,p.props.privateColStart=v+1-R,p.props.privateShow=(s=p.props.privateShow)!==null&&s!==void 0?s:!0)}let m=0,f=!1;for(const{child:a,rawChildSpan:_}of u){if(f&&(this.overflow=!0),!f){const h=Number((o=x((l=a.props)===null||l===void 0?void 0:l.offset,y))!==null&&o!==void 0?o:0),c=Math.min(_+h,v);if(a.props?(a.props.privateSpan=c,a.props.privateOffset=h):a.props={privateSpan:c,privateOffset:h},S){const w=m%v;c+w>v&&(m+=v-w),c+m+R>$*v?f=!0:m+=c}}f&&(a.props?a.props.privateShow!==!0&&(a.props.privateShow=!1):a.props={privateShow:!1})}return M("div",ee({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[E]:this.isSsr||void 0},this.$attrs),u.map(({child:a})=>a))};return this.isResponsive&&this.responsive==="self"?M(H,{onResize:this.handleResize},{default:e}):e()}});export{de as N,pe as a};
