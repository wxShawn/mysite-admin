import{_ as de}from"./UploadMedia.3f58cf2b.js";import{ar as pe,d as E,u as ne,g as D,n as ue,o as j,aa as me,as as ge,h as x,ag as ae,bt as fe,az as J,a as he,e as Q,f as M,bu as ve,a6 as X,ad as ye,a9 as _e,aI as xe,aF as we,ap as ze,B as C,C as N,al as w,_ as be,z as Se,r as T,A as V,au as Ce,D as n,E as o,F as t,a2 as Y,M as H,bv as $e,J as q,G as Z,H as U,N as O,I as k,an as ee,bw as ke,am as W,K as R,bn as A,bs as te,bx as Be,by as Le}from"./index.c8a34d21.js";import{N as Me}from"./Pagination.1ab31228.js";import{u as Ne}from"./use-dialog.5e9f1785.js";import{a as Re,N as Ie}from"./Grid.982f478f.js";import"./Add.3fc4f840.js";const Fe={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},Te=()=>Fe,Ue={name:"Space",self:Te},Ee=Ue;let K;const Pe=()=>{if(!pe)return!0;if(K===void 0){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const l=e.scrollHeight===1;return document.body.removeChild(e),K=l}return K},Ve=Object.assign(Object.assign({},D.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),je=E({name:"Space",props:Ve,setup(e){const{mergedClsPrefixRef:l,mergedRtlRef:r}=ne(e),a=D("Space","-space",void 0,Ee,e,l),m=ue("Space",r,l);return{useGap:Pe(),rtlEnabled:m,mergedClsPrefix:l,margin:j(()=>{const{size:s}=e;if(Array.isArray(s))return{horizontal:s[0],vertical:s[1]};if(typeof s=="number")return{horizontal:s,vertical:s};const{self:{[ae("gap",s)]:c}}=a.value,{row:u,col:y}=fe(c);return{horizontal:J(y),vertical:J(u)}})}},render(){const{vertical:e,align:l,inline:r,justify:a,itemStyle:m,margin:s,wrap:c,mergedClsPrefix:u,rtlEnabled:y,useGap:h,wrapItem:I,internalUseGap:v}=this,b=me(ge(this));if(!b.length)return null;const P=`${s.horizontal}px`,B=`${s.horizontal/2}px`,L=`${s.vertical}px`,_=`${s.vertical/2}px`,f=b.length-1,d=a.startsWith("space-");return x("div",{role:"none",class:[`${u}-space`,y&&`${u}-space--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e?"column":"row",justifyContent:["start","end"].includes(a)?"flex-"+a:a,flexWrap:!c||e?"nowrap":"wrap",marginTop:h||e?"":`-${_}`,marginBottom:h||e?"":`-${_}`,alignItems:l,gap:h?`${s.vertical}px ${s.horizontal}px`:""}},!I&&(h||v)?b:b.map((G,z)=>x("div",{role:"none",style:[m,{maxWidth:"100%"},h?"":e?{marginBottom:z!==f?L:""}:y?{marginLeft:d?a==="space-between"&&z===f?"":B:z!==f?P:"",marginRight:d?a==="space-between"&&z===0?"":B:"",paddingTop:_,paddingBottom:_}:{marginRight:d?a==="space-between"&&z===f?"":B:z!==f?P:"",marginLeft:d?a==="space-between"&&z===0?"":B:"",paddingTop:_,paddingBottom:_}]},G)))}}),De=e=>{const{opacityDisabled:l,heightTiny:r,heightSmall:a,heightMedium:m,heightLarge:s,heightHuge:c,primaryColor:u,fontSize:y}=e;return{fontSize:y,textColor:u,sizeTiny:r,sizeSmall:a,sizeMedium:m,sizeLarge:s,sizeHuge:c,color:u,opacitySpinning:l}},Ge={name:"Spin",common:he,self:De},He=Ge,Oe=Q([Q("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),M("spin-container",{position:"relative"},[M("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[ve()])]),M("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),M("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[X("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),M("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),M("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[X("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),We={small:20,medium:18,large:16},Ae=Object.assign(Object.assign({},D.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),Ke=E({name:"Spin",props:Ae,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:r}=ne(e),a=D("Spin","-spin",Oe,He,e,l),m=j(()=>{const{size:c}=e,{common:{cubicBezierEaseInOut:u},self:y}=a.value,{opacitySpinning:h,color:I,textColor:v}=y,b=typeof c=="number"?ze(c):y[ae("size",c)];return{"--n-bezier":u,"--n-opacity-spinning":h,"--n-size":b,"--n-color":I,"--n-text-color":v}}),s=r?ye("spin",j(()=>{const{size:c}=e;return typeof c=="number"?String(c):c[0]}),m,e):void 0;return{mergedClsPrefix:l,compitableShow:_e(e,["spinning","show"]),mergedStrokeWidth:j(()=>{const{strokeWidth:c}=e;if(c!==void 0)return c;const{size:u}=e;return We[typeof u=="number"?"medium":u]}),cssVars:r?void 0:m,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var e,l;const{$slots:r,mergedClsPrefix:a,description:m}=this,s=r.icon&&this.rotate,c=(m||r.description)&&x("div",{class:`${a}-spin-description`},m||((e=r.description)===null||e===void 0?void 0:e.call(r))),u=r.icon?x("div",{class:[`${a}-spin-body`,this.themeClass]},x("div",{class:[`${a}-spin`,s&&`${a}-spin--rotate`],style:r.default?"":this.cssVars},r.icon()),c):x("div",{class:[`${a}-spin-body`,this.themeClass]},x(xe,{clsPrefix:a,style:r.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${a}-spin`}),c);return(l=this.onRender)===null||l===void 0||l.call(this),r.default?x("div",{class:[`${a}-spin-container`,this.themeClass],style:this.cssVars},x("div",{class:[`${a}-spin-content`,this.compitableShow&&`${a}-spin-content--spinning`]},r),x(we,{name:"fade-in-transition"},{default:()=>this.compitableShow?u:null})):u}}),Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Qe=w("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"},null,-1),Xe=[Qe],Ye=E({name:"DeleteForeverFilled",render:function(l,r){return C(),N("svg",Je,Xe)}}),qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ze=w("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83l3.75 3.75l1.83-1.83z",fill:"currentColor"},null,-1),et=[Ze],tt=E({name:"EditRound",render:function(l,r){return C(),N("svg",qe,et)}}),nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},at=w("path",{d:"M18 13v7H4V6h5.02c.05-.71.22-1.38.48-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5l-2-2zm-1.5 5h-11l2.75-3.53l1.96 2.36l2.75-3.54zm2.8-9.11c.44-.7.7-1.51.7-2.39C20 4.01 17.99 2 15.5 2S11 4.01 11 6.5s2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7L21 13.42L22.42 12L19.3 8.89zM15.5 9a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5z",fill:"currentColor"},null,-1),st=[at],it=E({name:"ImageSearchFilled",render:function(l,r){return C(),N("svg",nt,st)}});const ot=e=>(Be("data-v-7915fc9d"),e=e(),Le(),e),lt=R("\u67E5\u8BE2"),rt=R("\u4E0A\u4F20\u56FE\u7247"),ct=["src","alt"],dt={class:"info"},pt={style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},ut={style:{color:"#aaa","font-size":"12px"}},mt={key:1,style:{"text-align":"center"}},gt=ot(()=>w("div",{style:{color:"#ccc"}},"No Image",-1)),ft={style:{"margin-top":"20px",display:"flex","justify-content":"flex-end"}},ht=R("\u590D\u5236"),vt=R("\u8FD4\u56DE"),yt=R("\u66F4\u65B0"),_t={__name:"ImageList",setup(e){const l=Se(),r=Ne(),a=T(null),m=V({name:""}),s=()=>{console.log(d.page,d.pageSize),f()},c=T(!1),u=()=>{f(),c.value=!1},y=g=>{r.warning({title:"\u8B66\u544A",content:"\u8BE5\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF0C\u786E\u8BA4\u5220\u9664\uFF1F",positiveText:"\u786E\u8BA4\u5220\u9664",negativeText:"\u8003\u8651\u4E00\u4E0B",onPositiveClick:async()=>{(await H.media.delete(g)).code===0&&(l.success("\u5220\u9664\u6210\u529F"),f())},onNegativeClick:()=>{}})},h=T(!1),I=T(null),v=V({id:"",name:"",url:""}),b=(g,p,i)=>{h.value=!0,Object.assign(v,{id:g,name:p,url:i})},P=async()=>{try{await navigator.clipboard.writeText(v.url),l.info("\u5DF2\u590D\u5236URL")}catch(g){console.warn(g),l.info("\u590D\u5236\u5931\u8D25")}},B=async()=>{const g=await H.media.update(v.id,v.name);g.code===0&&(l.success(g.msg),f()),h.value=!1},L=V([]),_=T(!1),f=async()=>{_.value=!0;const{page:g,pageSize:p}=d,{name:i}=m,F=await H.media.findAllImage(g,p,i);if(F.code===0){L.length=0,G(F.result.count);const{rows:$}=F.result;for(let S=0,ie=$.length;S<ie;S++){const oe=$[S].id,le=`${$e.REQUEST_URL}/${$[S].path.split("uploads/",2)[1]}`,re=$[S].name,ce=$[S].size>1024*1024?($[S].size/1024/1024).toFixed(2)+" MB":($[S].size/1024).toFixed(2)+" KB";L.push({id:oe,url:le,name:re,size:ce})}}_.value=!1};Ce(()=>{f()});const d=V({page:1,pageSize:10,sizeOptions:[{label:"10/\u9875",value:10},{label:"20/\u9875",value:20},{label:"30/\u9875",value:30}],pageCount:0,total:0}),G=g=>{if(g===0)return!1;d.total=g,d.pageCount=Math.ceil(g/d.pageSize),d.page>d.pageCount&&(d.page=d.pageCount,f())},z=()=>{f()},se=()=>{f()};return(g,p)=>(C(),N(Y,null,[n(t(je),{vertical:"",size:12},{default:o(()=>[n(t(q),null,{default:o(()=>[n(t(Z),{ref_key:"searchFormRef",ref:a,inline:"",model:m},{default:o(()=>[n(t(U),{label:"\u56FE\u7247\u6807\u9898"},{default:o(()=>[n(t(O),{value:m.name,"onUpdate:value":p[0]||(p[0]=i=>m.name=i)},null,8,["value"])]),_:1}),n(t(U),null,{default:o(()=>[n(t(k),{type:"info",onClick:s},{default:o(()=>[lt]),_:1})]),_:1}),n(t(U),null,{default:o(()=>[n(t(k),{type:"primary",onClick:p[1]||(p[1]=i=>c.value=!0)},{default:o(()=>[rt]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),L.length>0?(C(),ee(t(Ke),{key:0,size:"large",show:_.value},{default:o(()=>[n(t(Re),{"x-gap":"12","y-gap":"12",cols:"m:3 l:4 xl:6",responsive:"screen"},{default:o(()=>[(C(!0),N(Y,null,ke(L,i=>(C(),ee(t(Ie),{key:i},{default:o(()=>[n(t(q),{class:"image-card","content-style":"padding: 5px",hoverable:""},{default:o(()=>[w("img",{class:"cover",src:i.url,alt:i.title},null,8,ct),n(t(k),{class:"delete-btn",size:"tiny",onClick:F=>y(i.id)},{default:o(()=>[n(t(W),null,{default:o(()=>[n(t(Ye))]),_:1})]),_:2},1032,["onClick"]),n(t(k),{class:"edit-btn",size:"tiny",onClick:F=>b(i.id,i.name,i.url)},{default:o(()=>[n(t(W),null,{default:o(()=>[n(t(tt))]),_:1})]),_:2},1032,["onClick"]),w("div",dt,[w("div",pt,[w("b",null,A(i.name),1)]),w("div",ut,A(i.size),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])):(C(),N("div",mt,[n(t(W),{depth:5,size:40},{default:o(()=>[n(t(it))]),_:1}),gt])),w("div",ft,[n(t(Me),{disabled:_.value,page:d.page,"onUpdate:page":p[2]||(p[2]=i=>d.page=i),"page-size":d.pageSize,"onUpdate:page-size":p[3]||(p[3]=i=>d.pageSize=i),"page-count":d.pageCount,"show-size-picker":"","page-sizes":d.sizeOptions,onUpdatePage:z,onUpdatePageSize:se},{prefix:o(()=>[R(" \u5171 "+A(d.total)+" \u5F20\u56FE\u7247 ",1)]),_:1},8,["disabled","page","page-size","page-count","page-sizes"])])]),_:1}),n(t(te),{show:c.value,"onUpdate:show":p[4]||(p[4]=i=>c.value=i),class:"custom-card",preset:"card",style:{width:"500px"},title:"\u4E0A\u4F20\u56FE\u7247"},{default:o(()=>[n(de,{accept:".gif,.jpg,.png,.jpeg",onSuccess:u})]),_:1},8,["show"]),n(t(te),{show:h.value,"onUpdate:show":p[7]||(p[7]=i=>h.value=i),preset:"dialog",title:"\u56FE\u7247"},{action:o(()=>[n(t(k),{onClick:p[6]||(p[6]=i=>h.value=!1)},{default:o(()=>[vt]),_:1}),n(t(k),{type:"primary",onClick:B},{default:o(()=>[yt]),_:1})]),default:o(()=>[n(t(Z),{ref_key:"editFormRef",ref:I,style:{"margin-top":"30px"},"label-placement":"left",model:v},{default:o(()=>[n(t(U),{label:"\u56FE\u7247\u540D\u79F0"},{default:o(()=>[n(t(O),{value:v.name,"onUpdate:value":p[5]||(p[5]=i=>v.name=i)},null,8,["value"])]),_:1}),n(t(U),{label:"\u56FE\u7247\u5730\u5740"},{default:o(()=>[n(t(O),{value:v.url,disabled:""},null,8,["value"]),n(t(k),{style:{"margin-left":"20px"},onClick:P},{default:o(()=>[ht]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])],64))}},$t=be(_t,[["__scopeId","data-v-7915fc9d"]]);export{$t as default};
